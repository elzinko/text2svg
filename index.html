<!DOCTYPE html>
<html>
  <head>
    <title>SVG Texte avec Masque d'Opacité</title>
    <script type="text/javascript">
      function updateSVG() {
        const texte = document.getElementById("texte").value;
        const largeur = document.getElementById("largeur").value;
        const hauteur = document.getElementById("hauteur").value;

        // Mettre à jour le texte
        document.getElementById("texteSVG").textContent = texte;

        // Mettre à jour les dimensions
        const svgElement = document.getElementById("monSVG");
        svgElement.setAttribute("width", largeur);
        svgElement.setAttribute("height", hauteur);

        document.getElementById("rectangle").setAttribute("width", largeur);
        document.getElementById("rectangle").setAttribute("height", hauteur);

        // Mettre à jour le rectangle du masque avec les nouvelles dimensions
        document.getElementById("maskRect").setAttribute("width", largeur);
        document.getElementById("maskRect").setAttribute("height", hauteur);
      }

      function downloadSVG() {
        const svgElement = document.getElementById("monSVG");
        const serializer = new XMLSerializer();
        const svgString = serializer.serializeToString(svgElement);
        const blob = new Blob([svgString], { type: "image/svg+xml" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.setAttribute("download", "image.svg");
        a.setAttribute("href", url);
        a.click();
      }
    </script>
  </head>
  <body>
    <label for="texte">Texte:</label>
    <input type="text" id="texte" value="Bonjour" />
    <label for="largeur">Largeur:</label>
    <input type="number" id="largeur" value="300" />
    <label for="hauteur">Hauteur:</label>
    <input type="number" id="hauteur" value="100" />
    <button onclick="updateSVG()">Mettre à jour</button>
    <button onclick="downloadSVG()">Télécharger SVG</button>

    <svg id="monSVG" width="300" height="100">
      <defs>
        <!-- Définir le masque de dégradé d'opacité -->
        <linearGradient id="maskGradient" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" style="stop-color: white; stop-opacity: 1" />
          <stop offset="100%" style="stop-color: white; stop-opacity: 0" />
        </linearGradient>
        <mask id="mask">
          <rect
            id="maskRect"
            x="0"
            y="0"
            width="300"
            height="100"
            fill="url(#maskGradient)"
          />
        </mask>
      </defs>
      <rect
        id="rectangle"
        x="0"
        y="0"
        rx="15"
        ry="15"
        width="300"
        height="100"
        style="fill: black"
      />
      <text
        id="texteSVG"
        x="50%"
        y="50%"
        dominant-baseline="middle"
        text-anchor="middle"
        font-size="24"
        font-family="Verdana"
        fill="white"
      >
        Bonjour
      </text>
      <!-- Application du masque -->
      <rect
        x="0"
        y="0"
        width="300"
        height="100"
        fill="black"
        mask="url(#mask)"
      />
    </svg>
  </body>
</html>
